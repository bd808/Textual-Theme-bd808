@import "colors.less";

/* Basic Body Structure */
* {
  font-size:100%;
  margin:0;
  padding:0;
  word-wrap:break-word;
}

body {
  background-color:@base3;
  color:@base00;
  font:10pt/1.1em "Dejavu Sans Mono", fixed;
  height:100%;
  overflow-x:hidden;
  overflow-y:visible;
  z-index:100;
}

body div#body_home {
  -webkit-transition:opacity 0.8s linear;
  bottom:0;
  left:0;
  max-height:99.99%;
  opacity:0; /* Set by JavaScript */
  position:absolute;
  right:0;
  width:100%;
  z-index:100;
}

body[viewtype="channel"] div#body_home {
  max-height:96.5%;
}

/* Loading Screen */
body div#loading_screen {
  -webkit-transition:opacity 0.8s linear;
  background:@base2;
  border:1px solid @base01;
  border-radius:5px;
  font-size:18px;
  height:21px;
  left:50%;
  margin-left:-150px;
  margin-top:-11px;
  opacity:1;
  padding:5px 5px 5px 10px;
  position:absolute;
  top:50%;
  width:300px;
}

/* Topic Bar */
#topic_bar {
  -webkit-transition:opacity 0.8s linear;
  background:@base1;
  border-bottom:1px solid @base02;
  box-shadow:0 1px 5px @base01;
  color:@base01;
  left:0;
  opacity:0;
  overflow:hidden;
  padding:.3em .5em;
  position:fixed;
  right:0;
  text-overflow:ellipsis;
  top:0;
  white-space:nowrap;
  z-index:400;

  &:hover {
    /* Topic bar hover additions contributed with permission from:
    <https://github.com/hbang/Simplified-Light-Modifications> */
    color:@base2;
    overflow:visible;
    white-space:normal;
  }
}

/* Remember Line */
#mark {
  margin-top:-1px;
  border-bottom:1px dashed @cyan;
  -webkit-transition:border 0.2s linear;
}

/* Historic Line */
.historic {
  opacity:0.6;
}

/* Time */
.time {
  color:@base1;
  white-space:nowrap;
}

/* Encryption Lock */
.encryptionLock img {
  float:right;
  height:11px;
  margin:0;
  margin-top:2px;
  padding:0;
  padding-left:10px;
}

/* Links */
a {
  border-bottom:dotted 1px;
  color:inherit;
  text-decoration:none;
  word-break:break-all;

  &:hover {
    border-bottom:solid 1px;
  }
}

/* Images */
body a img {
  border:0;
}

body img {
  display:block;
  max-width:95%;
  margin:15px 15px 12px 15px;
}

/* lines */
body .line {
  margin-top:-1px;
  padding:3px 5px 2px 5px;
}

/* NOTICE/CTCP/WALLOPS */
body div.line[ltype~="ctcp"],
body div.line[ltype~="notice"],
body div.line[ltype~="wallops"] {
  background:@base2;
  border:1px solid @blue;
  border-width:1px 0 1px 0;
  .sender {
    color:@red;
    font-weight:700;
  }
}
.consecutive-type(@type) {
  body div.line[ltype~="@{type}"] + div.line[ltype~="@{type}"] {
    border-top:none;
  }
}
.consecutive-type(cctp);
.consecutive-type(notice);
.consecutive-type(wallops);

/* PRIVMSG */
body div.line[ltype~="privmsg"] {
  .message {
    color:@base00;
  }
  .sender {
    white-space:pre-wrap;
  }
}

body div.line[highlight="true"] {
  font-weight:normal;
  border:1px solid @yellow;
  border-width:1px 0;
  background-color:@base2 !important;
}

/* ACTION */
body div.line[ltype~="action"] {
  .message {
    font-style:italic;
  }
  .sender {
    &:before {
      content:"•";
      margin-right:0.4em;
    }
  }
}

/* GENERAL EVENT */
body div.event[ltype~="join"],
body div.event[ltype~="part"],
body div.event[ltype~="kick"],
body div.event[ltype~="quit"],
body div.event[ltype~="kill"],
body div.event[ltype~="nick"],
body div.event[ltype~="mode"],
body div.event[ltype~="topic"],
body div.event[ltype~="website"] {
  color:@base1;
  font-size:smaller;
  .time {
    padding-left:1.2em;
  }
}
body div.event[ltype~="join"],
body div.event[ltype~="part"],
body div.event[ltype~="quit"],
body div.event[ltype~="nick"] {
  .sender,
  .message {
    font-style:italic;
  }
}

body div.event[ltype~="join"] .message:before {
  content:"⇀";
  color:@green;
}

body div.event[ltype~="kick"] .message:before,
body div.event[ltype~="part"] .message:before,
body div.event[ltype~="quit"] .message:before {
  content:"↽";
  color:@magenta;
}

body div.event[ltype~="nick"] .message:before {
  content:"○";
  color:@cyan;
}

/* DEBUG/INVITE */
body div.event[ltype~="invite"],
body div.event[ltype~="debug"],
body div.event[ltype~="rawhtml"] {
  background:@base3;
  border:1px solid @base2;
  border-width:1px 0;
}

/* Message of the Day (MOTD) */
/* 720, 721, 722 are used by ShadowIRCd for Oper MOTD. */
/* 372, 375, 376 are normal MOTD shared by several IRCds. */
body div.event[command="375"],
body div.event[command="720"] {
  /* Start MOTD. */
  border-bottom:none;
}
body div.event[command="372"],
body div.event[command="721"] {
  border:none;
  .time {
    display:none;
  }
  .message {
    padding-left:2em;
  }
}
body div.event[command="376"],
body div.event[command="722"] {
  /* End MOTD. */
  border-top:none;
}

/* Help */
body div.event[command="704"] {
  border-bottom:none;
}
body div.event[command="705"] {
  border:none;
  .time {
    display:none;
  }
  .message {
    padding-left:2em;
  }
}
body div.event[command="706"] {
  border-top:none;
}

/* Local Debug */
body div.event[command~="-100"] + div.event[command~="-100"] {
  border-top:none;
}

/* Nickname Colors */
.sender[ltype~="myself"] {
  color:@base01;
  font-weight:bold;
}

// generate a whole lot of nickname color rules
// see @nick_[0..31] in colors.less
.senderX (@index) when (@index > -1) {
  .sender[ltype~="normal"][colornumber="@{index}"],
  inline_nickname[colornumber="@{index}"] {
    @n: "nick_@{index}";
    color: @@n;
  }
  .senderX(@index - 1);
}
.senderX (-1) {}
.senderX(31);

/*muted senders*/
body div.line[ltype~="muted"] {
  color:@base1;
  font-size:smaller;
  .time {
    padding-left:.75em;
  }
  .sender {
    color:inherit !important;
  }
  .message {
    color:@base1;
  }
}

